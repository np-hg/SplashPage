# Splash Server

`bindata.go` is generated by `go-bindata data/` command. It includes our static files in the build.

## Debugging

Only have a valid setup for vscode

1. Create a task in `.vscode/tasks.json`

```json
{
    "label": "go-bindata",
    "type": "shell",
    "command": "go-bindata data/",
    "isBackground": false,
    "promptOnClose": false
}
```

2. Add debug configuration in `.vscode/launch.json`

```json
{
    "name": "Debug Splash",
    "type": "go",
    "request": "launch",
    "mode": "debug",
    "program": "${workspaceFolder}",
    "preLaunchTask": "go-bindata",
    "args": ["--config", "test.yaml"],

}

```

3. Create a test.yaml in root (its in gitignore)

```yaml
port: 3000
auth:
  client_id: splashpage
  client_secret: <redacted>
  callback_url: http://localhost:3000/callback # debug
  provider_url: https://sso.wildfireworkspace.com/auth/realms/wildfire
services:
  bannerImage: https://boeing-wildfire-splash-assets.s3.us-east-2.amazonaws.com/splash.jpg
  icons:
    - href: https://confluence.wildfireworkspace.com
      src: https://boeing-wildfire-splash-assets.s3.us-east-2.amazonaws.com/conf.png
    - href: https://jira.wildfireworkspace.com
      src: https://boeing-wildfire-splash-assets.s3.us-east-2.amazonaws.com/jira.png
```

4. You must have admin in https://sso.wildfireworkspace.com, login and temporarily add `http://localhost:3000/callback` to valid callback urls

5. Debug!